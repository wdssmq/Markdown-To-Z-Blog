---
title: 「折腾」Linux 命令行部署 QQ 机器人 mirai
date: 2023-02-25 14:43:30
tags:
 - QQ
 - Linux
 - 折腾
categories:
 - 电脑网络
id: 61
alias: 20141117777
---

再再次尝试新的 QQ 机器人框架什么的……

<!--more-->

「AD：[ShortSth:DesiVPS][/ShortSth]」

### 安装及配置

· **安装 Mirai Console Loader：**

```shell
# 虽然 mirai 是 Java 项目……
mkdir -p ~/node/mirai-mcl
cd ~/node/mirai-mcl

# 下载安装脚本
curl -LJO \
https://github.com/iTXTech/mcl-installer/releases/download/ce4ab47/mcl-installer-ce4ab47-linux-amd64-musl

# 安装
chmod +x mcl-installer-ce4ab47-linux-amd64-musl
./mcl-installer-ce4ab47-linux-amd64-musl

# 删除安装脚本
rm mcl-installer-ce4ab47-linux-amd64-musl

```

· **启动及登录：**

```shell
cd ~/node/mirai-mcl

# 启动
./mcl

/autoLogin add <qq> <password>

# mirai-mcl/config/Console/AutoLogin.yml
```

· **插件：**

安装 http-api 插件，用于和另外的程序通信。

```shell
cd ~/node/mirai-mcl
cd plugins

# 下载插件
wget https://github.com/yyuueexxiinngg/onebot-kotlin/releases/download/0.3.4/onebot-mirai-0.3.4-all.jar

# 再次启动生成插件配置文件
cd ~/node/mirai-mcl
./mcl

# 配置文件如下，要在退出登录后修改
# mirai-mcl/config/com.github.yyuueexxiinngg.onebot/settings.yml
```

### 后台运行

```shell
# 启动
nohup sh mcl &

# 查看后台进程
ps -ef | grep mcl

```

### 其他

官方插件好像用不到？

```shell
# ./mcl --update-package net.mamoe:mirai-api-http --type plugin --channel stable-v2
# ./mcl --update-package net.mamoe:mirai-login-solver-selenium --channel nightly --type plugin
```

### 链接

mirai/ConsoleTerminal.md at dev · mamoe/mirai
`https://github.com/mamoe/mirai/blob/dev/docs/ConsoleTerminal.md`

iTXTech/mcl-installer: MCL一键安装工具
`https://github.com/iTXTech/mcl-installer`

mirai-console-loader/cli.md at master · iTXTech/mirai-console-loader
`https://github.com/iTXTech/mirai-console-loader/blob/master/cli.md`

<!-- project-mirai/mirai-api-http: Mirai HTTP API (console) plugin
`https://github.com/project-mirai/mirai-api-http` -->

yyuueexxiinngg/onebot-kotlin: OneBot标准的Kotlin实现及mirai插件 - 原cqhttp-mirai
`https://github.com/yyuueexxiinngg/onebot-kotlin`

Mirai后台运行和查看后台进程 - Miracle
`https://www.tofzl.com/index.php/archives/23/`

